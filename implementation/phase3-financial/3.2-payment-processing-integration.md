# Step 3.2: Payment Processing Integration

## Prompt

```
Implement the payment processing system with these requirements:
1. Integrate with cryptocurrency payment gateways (ETH, USDC, etc.)
2. Integrate with traditional payment processors via APIs (Stripe, PayPal)
3. Implement invoice generation system
4. Create automated receipt and confirmation mechanisms
5. Design payment status tracking and reconciliation
6. Implement retry logic for failed payments
7. Create notification system for payment events
8. Design refund processing mechanisms
9. Implement fraud detection measures

Output should include implementation code, API integration guides, testing scenarios, and operational procedures.
```

## Implementation Guidelines

### Payment Processing Architecture

#### Cryptocurrency Integration
- Implement wallet address management
- Design transaction monitoring and verification
- Create gas optimization strategies
- Implement secure key management

#### Traditional Payment Integration
- Design Stripe API integration
- Implement PayPal payment processing
- Create payment method selection logic
- Design payment data security measures

#### Invoice Management
- Implement automated invoice generation
- Design invoice numbering and tracking
- Create payment term enforcement
- Implement invoice archiving and retrieval

#### Payment Workflow
- Design end-to-end payment process
- Implement payment status tracking
- Create payment reconciliation system
- Design failed payment handling and retry logic

#### Security and Compliance
- Implement fraud detection algorithms
- Design payment verification procedures
- Create compliance with financial regulations
- Implement audit trails for all transactions

#### User Experience
- Design confirmation and receipt systems
- Implement notification mechanisms
- Create intuitive payment interfaces
- Design error handling and user guidance
